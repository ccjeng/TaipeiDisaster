function isEmpty(e){return"undefined"==typeof e||!e||0===e.length}!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,a){e.orderByField="CaseTime",e.reverseSort=!0;var t={center:new google.maps.LatLng(25.06464,121.55676),zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];var o=new google.maps.InfoWindow,s=function(a){var t,s,i="true"===a.CaseComplete?"80e516":"FE7569";switch(a.PName){case"路樹災情":s="樹";break;case"民生、基礎設施災情":s="民";break;case"建物毀損":s="建";break;case"廣告招牌災情":s="廣";break;case"積淹水災情":s="水";break;case"其他災情":s="其";break;case"環境污染":s="污";break;case"土石災情":s="土";break;case"道路、隧道災情":s="路";break;case"鐵路、高鐵及捷運災情":s="運";break;case"車輛及交通事故":s="車";break;default:s="危"}"true"===a.CaseComplete?(s="復",t=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_spin&chld=0.7|0|"+i+"|15|b|"+s)):t=new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_spin&chld=0.7|20|"+i+"|15|b|"+s);var r=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(a.Wgs84Y,a.Wgs84X),title:a.PName+" - "+a.Name,pid:a["-diffgr:id"].toLowerCase(),icon:t,pinColor:i});r.content='<div class="infoWindowContent">發生時間：'+a.CaseTime+"</br>災情地點："+a.CaseLocationDescription+"</br>災情描述："+a.CaseDescription+"</div>",google.maps.event.addListener(r,"click",function(){o.setContent("<h3>"+r.title+"</h3>"+r.content),o.open(e.map,r)}),e.markers.push(r)};e.total={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.doneTotal={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},a.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").success(function(a,t,o,r){d=a.DataSet["diffgr:diffgram"].NewDataSet.CASE_SUMMARY,e.dataTime=a.DataSet["-date"],e.cases=d;var n=0,m=0,l=0;for(i=0;i<d.length;i++)s(d[i]),"true"===d[i].CaseComplete?(n+=1,"路樹災情"===d[i].PName&&(e.doneTotal["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName&&(e.doneTotal["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName&&(e.doneTotal["建物毀損"]+=1),"廣告招牌災情"===d[i].PName&&(e.doneTotal["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName&&(e.doneTotal["積淹水災情"]+=1),"其他災情"===d[i].PName&&(e.doneTotal["其他災情"]+=1),"土石災情"===d[i].PName&&(e.doneTotal["土石災情"]+=1),"道路、隧道災情"===d[i].PName&&(e.doneTotal["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName&&(e.doneTotal["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName&&(e.doneTotal["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName&&(e.doneTotal["車輛及交通事故"]+=1)):m+=1,"路樹災情"===d[i].PName&&(e.total["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName&&(e.total["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName&&(e.total["建物毀損"]+=1),"廣告招牌災情"===d[i].PName&&(e.total["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName&&(e.total["積淹水災情"]+=1),"其他災情"===d[i].PName&&(e.total["其他災情"]+=1),"土石災情"===d[i].PName&&(e.total["土石災情"]+=1),"道路、隧道災情"===d[i].PName&&(e.total["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName&&(e.total["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName&&(e.total["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName&&(e.total["車輛及交通事故"]+=1);l=100*n/(n+m),e.caseDone=n,e.caseInProgress=m,e.caseRate=l.toFixed(2);new MarkerClusterer(e.map,e.markers,{gridSize:80,maxZoom:16})}).error(function(e,a,t,o){console.log("http error")}),a.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterDecisionSummary.json").success(function(a,t,o,s){e.decisions=a.DataSet["diffgr:diffgram"].NewDataSet.DCSDisasterDecision}).error(function(e,a,t,o){console.log("http error")}),e.itemClicked=function(a,t){google.maps.event.trigger(e.markers[t],"click")}}])}();
//# sourceMappingURL=all.min.js.map