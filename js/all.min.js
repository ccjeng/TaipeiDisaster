function isEmpty(e){return"undefined"==typeof e||!e||0===e.length}!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,t){e.orderByField="CaseTime",e.reverseSort=!0;var o={zoom:16,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),o),e.markers=[];var a=new google.maps.InfoWindow,n=function(t){var o=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(t.Wgs84Y[0],t.Wgs84X[0]),title:t.PName[0]+" - "+t.Name[0]});o.content='<div class="infoWindowContent">發生時間：'+(isEmpty(d[i].CaseTime)?"":t.CaseTime[0])+"</br>災情地點："+t.CaseLocationDescription[0]+"</br>災情描述："+t.CaseDescription[0]+"</div>","true"===t.CaseComplete[0]&&o.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(o,"click",function(){a.setContent("<h3>"+o.title+"</h3>"+o.content),a.open(e.map,o)}),e.markers.push(o)};e.total={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.doneTotal={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.listDistrict=["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區"],t.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").success(function(t,o,a,m){d=t.DataSet["diffgr:diffgram"][0].NewDataSet[0].CASE_SUMMARY,e.cases=d;var s=0,l=0,r=0;for(i=0;i<d.length;i++)n(d[i]),"true"===d[i].CaseComplete[0]?(s+=1,"路樹災情"===d[i].PName[0]&&(e.doneTotal["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName[0]&&(e.doneTotal["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName[0]&&(e.doneTotal["建物毀損"]+=1),"廣告招牌災情"===d[i].PName[0]&&(e.doneTotal["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName[0]&&(e.doneTotal["積淹水災情"]+=1),"其他災情"===d[i].PName[0]&&(e.doneTotal["其他災情"]+=1),"土石災情"===d[i].PName[0]&&(e.doneTotal["土石災情"]+=1),"道路、隧道災情"===d[i].PName[0]&&(e.doneTotal["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName[0]&&(e.doneTotal["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName[0]&&(e.doneTotal["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName[0]&&(e.doneTotal["車輛及交通事故"]+=1)):l+=1,"路樹災情"===d[i].PName[0]&&(e.total["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName[0]&&(e.total["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName[0]&&(e.total["建物毀損"]+=1),"廣告招牌災情"===d[i].PName[0]&&(e.total["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName[0]&&(e.total["積淹水災情"]+=1),"其他災情"===d[i].PName[0]&&(e.total["其他災情"]+=1),"土石災情"===d[i].PName[0]&&(e.total["土石災情"]+=1),"道路、隧道災情"===d[i].PName[0]&&(e.total["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName[0]&&(e.total["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName[0]&&(e.total["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName[0]&&(e.total["車輛及交通事故"]+=1);r=100*s/(s+l),e.caseDone=s,e.caseInProgress=l,e.caseRate=r.toFixed(2)}).error(function(e,t,o,a){console.log("http error")})}])}();
//# sourceMappingURL=all.min.js.map