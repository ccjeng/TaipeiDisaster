function isEmpty(e){return"undefined"==typeof e||!e||0===e.length}!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,o){e.orderByField="CaseTime",e.reverseSort=!0;var t={zoom:16,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];var a=new google.maps.InfoWindow,n=function(o){var t=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.Wgs84Y,o.Wgs84X),title:o.PName+" - "+o.Name});t.content='<div class="infoWindowContent">發生時間：'+(isEmpty(d[i].CaseTime)?"":o.CaseTime)+"</br>災情地點："+o.CaseLocationDescription+"</br>災情描述："+o.CaseDescription+"</div>","true"===o.CaseComplete&&t.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(t,"click",function(){a.setContent("<h3>"+t.title+"</h3>"+t.content),a.open(e.map,t)}),e.markers.push(t)};e.total={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.doneTotal={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"積淹水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.listDistrict=["中正區","大同區","中山區","松山區","大安區","萬華區","信義區","士林區","北投區","內湖區","南港區","文山區"],o.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").success(function(o,t,a,m){d=o.DataSet["diffgr:diffgram"].NewDataSet.CASE_SUMMARY,e.cases=d;var s=0,l=0,r=0;for(i=0;i<d.length;i++)n(d[i]),"true"===d[i].CaseComplete?(s+=1,"路樹災情"===d[i].PName&&(e.doneTotal["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName&&(e.doneTotal["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName&&(e.doneTotal["建物毀損"]+=1),"廣告招牌災情"===d[i].PName&&(e.doneTotal["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName&&(e.doneTotal["積淹水災情"]+=1),"其他災情"===d[i].PName&&(e.doneTotal["其他災情"]+=1),"土石災情"===d[i].PName&&(e.doneTotal["土石災情"]+=1),"道路、隧道災情"===d[i].PName&&(e.doneTotal["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName&&(e.doneTotal["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName&&(e.doneTotal["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName&&(e.doneTotal["車輛及交通事故"]+=1)):l+=1,"路樹災情"===d[i].PName&&(e.total["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName&&(e.total["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName&&(e.total["建物毀損"]+=1),"廣告招牌災情"===d[i].PName&&(e.total["廣告招牌災情"]+=1),"積淹水災情"===d[i].PName&&(e.total["積淹水災情"]+=1),"其他災情"===d[i].PName&&(e.total["其他災情"]+=1),"土石災情"===d[i].PName&&(e.total["土石災情"]+=1),"道路、隧道災情"===d[i].PName&&(e.total["道路、隧道災情"]+=1),"水利設施災害"===d[i].PName&&(e.total["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName&&(e.total["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName&&(e.total["車輛及交通事故"]+=1);r=100*s/(s+l),e.caseDone=s,e.caseInProgress=l,e.caseRate=r.toFixed(2)}).error(function(e,o,t,a){console.log("http error")}),e.openInfoWindow=function(e,o){google.maps.event.trigger(o,"click"),console.log(o)}}])}();
//# sourceMappingURL=all.min.js.map