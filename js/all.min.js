!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,o){e.orderByField="CaseTime",e.reverseSort=!0;var t={zoom:13,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];var n=new google.maps.InfoWindow,a=function(o){var t=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.Wgs84Y[0],o.Wgs84X[0]),title:o.CaseLocationDescription[0]});t.content='<div class="infoWindowContent">'+o.CaseTime[0]+"</br>"+o.CaseDescription[0]+"</div>","true"===o.CaseComplete[0]&&t.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(t,"click",function(){n.setContent("<h3>"+t.title+"</h3>"+t.content),n.open(e.map,t)}),e.markers.push(t)};e.openInfoWindow=function(e,o){e.preventDefault(),google.maps.event.trigger(o,"click")},o.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").success(function(o,t,n,s){console.log("call json"),d=o.DataSet["diffgr:diffgram"][0].NewDataSet[0].CASE_SUMMARY,e.cases=d;var r=0,p=0,g=0;for(i=0;i<d.length;i++)a(d[i]),"true"===d[i].CaseComplete[0]?r+=1:p+=1;g=100*r/(r+p),e.caseDone=r,e.caseInProgress=p,e.caseRate=g.toFixed(2)}).error(function(e,o,t,n){console.log("http error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkaHR0cCIsIm9yZGVyQnlGaWVsZCIsInJldmVyc2VTb3J0IiwibWFwT3B0aW9ucyIsInpvb20iLCJjZW50ZXIiLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibWFwVHlwZUlkIiwiTWFwVHlwZUlkIiwiVEVSUkFJTiIsIm1hcCIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtYXJrZXJzIiwiaW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJjcmVhdGVNYXJrZXIiLCJpbmZvIiwibWFya2VyIiwiTWFya2VyIiwicG9zaXRpb24iLCJXZ3M4NFkiLCJXZ3M4NFgiLCJ0aXRsZSIsIkNhc2VMb2NhdGlvbkRlc2NyaXB0aW9uIiwiY29udGVudCIsIkNhc2VUaW1lIiwiQ2FzZURlc2NyaXB0aW9uIiwiQ2FzZUNvbXBsZXRlIiwic2V0SWNvbiIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJzZXRDb250ZW50Iiwib3BlbiIsInB1c2giLCJvcGVuSW5mb1dpbmRvdyIsImUiLCJzZWxlY3RlZE1hcmtlciIsInByZXZlbnREZWZhdWx0IiwidHJpZ2dlciIsImdldCIsInN1Y2Nlc3MiLCJkYXRhIiwic3RhdHVzIiwiaGVhZGVycyIsImNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJkIiwiRGF0YVNldCIsIk5ld0RhdGFTZXQiLCJjYXNlcyIsImNhc2VEb25lIiwiY2FzZUluUHJvZ3Jlc3MiLCJjYXNlUmF0ZSIsImkiLCJsZW5ndGgiLCJ0b0ZpeGVkIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJDQUNBLFdBRUEsR0FBQUEsR0FBQUMsUUFBQUMsT0FBQSxTQUVBRixHQUFBRyxXQUFBLHNCQUFBLFNBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxhQUFBLFdBQ0FGLEVBQUFHLGFBQUEsQ0FFQSxJQUFBQyxJQUNBQyxLQUFBLEdBQ0FDLE9BQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQSxXQUFBLGFBQ0FDLFVBQUFILE9BQUFDLEtBQUFHLFVBQUFDLFFBRUFaLEdBQUFhLElBQUEsR0FBQU4sUUFBQUMsS0FBQU0sSUFBQUMsU0FBQUMsZUFBQSxPQUFBWixHQUVBSixFQUFBaUIsVUFFQSxJQUFBQyxHQUFBLEdBQUFYLFFBQUFDLEtBQUFXLFdBRUFDLEVBQUEsU0FBQUMsR0FHQSxHQUFBQyxHQUFBLEdBQUFmLFFBQUFDLEtBQUFlLFFBQ0FWLElBQUFiLEVBQUFhLElBQ0FXLFNBQUEsR0FBQWpCLFFBQUFDLEtBQUFDLE9BQUFZLEVBQUFJLE9BQUEsR0FBQUosRUFBQUssT0FBQSxJQUNBQyxNQUFBTixFQUFBTyx3QkFBQSxJQUVBTixHQUFBTyxRQUFBLGtDQUFBUixFQUFBUyxTQUFBLEdBQUEsUUFBQVQsRUFBQVUsZ0JBQUEsR0FBQSxTQUVBLFNBQUFWLEVBQUFXLGFBQUEsSUFDQVYsRUFBQVcsUUFBQSwwREFHQTFCLE9BQUFDLEtBQUEwQixNQUFBQyxZQUFBYixFQUFBLFFBQUEsV0FDQUosRUFBQWtCLFdBQUEsT0FBQWQsRUFBQUssTUFBQSxRQUFBTCxFQUFBTyxTQUVBWCxFQUFBbUIsS0FBQXJDLEVBQUFhLElBQUFTLEtBR0F0QixFQUFBaUIsUUFBQXFCLEtBQUFoQixHQUtBdEIsR0FBQXVDLGVBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsaUJBQ0FuQyxPQUFBQyxLQUFBMEIsTUFBQVMsUUFBQUYsRUFBQSxVQUdBeEMsRUFBQTJDLElBQUEseUVBQ0FDLFFBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsUUFBQUMsSUFBQSxhQUVBQyxFQUFBTixFQUFBTyxRQUFBLG1CQUFBLEdBQUFDLFdBQUEsR0FBQSxhQUNBdEQsRUFBQXVELE1BQUFILENBRUEsSUFBQUksR0FBQSxFQUFBQyxFQUFBLEVBQUFDLEVBQUEsQ0FDQSxLQUFBQyxFQUFBLEVBQUFBLEVBQUFQLEVBQUFRLE9BQUFELElBQ0F2QyxFQUFBZ0MsRUFBQU8sSUFDQSxTQUFBUCxFQUFBTyxHQUFBM0IsYUFBQSxHQUNBd0IsR0FBQSxFQUVBQyxHQUFBLENBR0FDLEdBQUEsSUFBQUYsR0FBQUEsRUFBQUMsR0FFQXpELEVBQUF3RCxTQUFBQSxFQUNBeEQsRUFBQXlELGVBQUFBLEVBQ0F6RCxFQUFBMEQsU0FBQUEsRUFBQUcsUUFBQSxLQUlBQyxNQUFBLFNBQUFoQixFQUFBQyxFQUFBQyxFQUFBQyxHQUVBQyxRQUFBQyxJQUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbihmdW5jdGlvbigpe1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtdKTtcblxuYXBwLmNvbnRyb2xsZXIoJ0dldERpc2FzdGVyU3VtbWFyeScsIFsnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuXG4gICAgJHNjb3BlLm9yZGVyQnlGaWVsZCA9ICdDYXNlVGltZSc7XG4gICAgJHNjb3BlLnJldmVyc2VTb3J0ID0gdHJ1ZTtcblxuICAgIHZhciBtYXBPcHRpb25zID0ge1xuICAgICAgICB6b29tOiAxMyxcbiAgICAgICAgY2VudGVyOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDI1LjA1MDQ0MTYsIDEyMS41NDE0MTg5KSxcbiAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuVEVSUkFJTlxuICAgIH07XG4gICAgJHNjb3BlLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCBtYXBPcHRpb25zKTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XG5cbiAgICB2YXIgY3JlYXRlTWFya2VyID0gZnVuY3Rpb24gKGluZm8pe1xuICAgICAgICBcblxuICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICBtYXA6ICRzY29wZS5tYXAsXG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhpbmZvLldnczg0WVswXSwgaW5mby5XZ3M4NFhbMF0pLFxuICAgICAgICAgICAgdGl0bGU6IGluZm8uQ2FzZUxvY2F0aW9uRGVzY3JpcHRpb25bMF0sXG4gICAgICAgIH0pO1xuICAgICAgICBtYXJrZXIuY29udGVudCA9ICc8ZGl2IGNsYXNzPVwiaW5mb1dpbmRvd0NvbnRlbnRcIj4nICsgaW5mby5DYXNlVGltZVswXSArICc8L2JyPicgKyBpbmZvLkNhc2VEZXNjcmlwdGlvblswXSArICc8L2Rpdj4nO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluZm8uQ2FzZUNvbXBsZXRlWzBdPT09J3RydWUnKSB7XG4gICAgICAgICAgbWFya2VyLnNldEljb24oJ2h0dHA6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMvbXMvaWNvbnMvZ3JlZW4tZG90LnBuZycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KCc8aDM+JyArIG1hcmtlci50aXRsZSArICc8L2gzPicgKyBtYXJrZXIuY29udGVudCApO1xuICAgICAgICAgICAgLy9pbmZvV2luZG93LnNldENvbnRlbnQobWFya2VyLmNvbnRlbnQpO1xuICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKCRzY29wZS5tYXAsIG1hcmtlcik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgICBcbiAgICB9O1xuICAgIFxuXG4gICAgJHNjb3BlLm9wZW5JbmZvV2luZG93ID0gZnVuY3Rpb24oZSwgc2VsZWN0ZWRNYXJrZXIpe1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LnRyaWdnZXIoc2VsZWN0ZWRNYXJrZXIsICdjbGljaycpO1xuICAgIH07XG5cbiAgICAkaHR0cC5nZXQoJ2h0dHBzOi8vdGNnYnVzZnMuYmxvYi5jb3JlLndpbmRvd3MubmV0L2Jsb2Jmcy9HZXREaXNhc3RlclN1bW1hcnkuanNvbicpXG4gICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjYWxsIGpzb24nKTtcblxuICAgICAgZCA9IGRhdGEuRGF0YVNldFsnZGlmZmdyOmRpZmZncmFtJ11bMF0uTmV3RGF0YVNldFswXVsnQ0FTRV9TVU1NQVJZJ107XG4gICAgICAkc2NvcGUuY2FzZXMgPSBkOyAvL2RhdGEuRGF0YVNldFsnZGlmZmdyOmRpZmZncmFtJ11bMF0uTmV3RGF0YVNldFswXVsnQ0FTRV9TVU1NQVJZJ107XG5cbiAgICAgIHZhciBjYXNlRG9uZSA9IDAsIGNhc2VJblByb2dyZXNzID0gMCwgY2FzZVJhdGUgPSAwLjAwO1xuICAgICAgZm9yIChpID0gMDsgaSA8IGQubGVuZ3RoOyBpKyspe1xuICAgICAgICBjcmVhdGVNYXJrZXIoZFtpXSk7XG4gICAgICAgIGlmIChkW2ldLkNhc2VDb21wbGV0ZVswXT09PSd0cnVlJykge1xuICAgICAgICAgICAgY2FzZURvbmUgPSBjYXNlRG9uZSArIDE7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGNhc2VJblByb2dyZXNzID0gY2FzZUluUHJvZ3Jlc3MgKyAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXNlUmF0ZSA9IDEwMCAqIGNhc2VEb25lIC8gKGNhc2VEb25lICsgY2FzZUluUHJvZ3Jlc3MpXG5cbiAgICAgICRzY29wZS5jYXNlRG9uZSA9IGNhc2VEb25lO1xuICAgICAgJHNjb3BlLmNhc2VJblByb2dyZXNzID0gY2FzZUluUHJvZ3Jlc3M7XG4gICAgICAkc2NvcGUuY2FzZVJhdGUgPSBjYXNlUmF0ZS50b0ZpeGVkKDIpO1xuXG5cbiAgICB9KVxuICAgIC5lcnJvcihmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgLy8gbG9nIGVycm9yXG4gICAgICBjb25zb2xlLmxvZygnaHR0cCBlcnJvcicpO1xuICAgIH0pO1xuXG5cblxuXG59XSk7XG5cbn0pKCk7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==