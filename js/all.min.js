!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,o){e.orderByField="CaseTime",e.reverseSort=!0;var t={zoom:13,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];var n=new google.maps.InfoWindow,a=function(o){var t=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.Wgs84Y[0],o.Wgs84X[0]),title:o.PName[0]+" - "+o.Name[0]});t.content='<div class="infoWindowContent">發生時間：'+o.CaseTime[0]+"</br>災情地點："+o.CaseLocationDescription[0]+"</br>災情描述："+o.CaseDescription[0]+"</div>","true"===o.CaseComplete[0]&&t.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(t,"click",function(){n.setContent("<h3>"+t.title+"</h3>"+t.content),n.open(e.map,t)}),e.markers.push(t)};e.openInfoWindow=function(e,o){e.preventDefault(),google.maps.event.trigger(o,"click")},o.get("https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json").success(function(o,t,n,s){console.log("call json"),d=o.DataSet["diffgr:diffgram"][0].NewDataSet[0].CASE_SUMMARY,e.cases=d;var r=0,p=0,g=0;for(i=0;i<d.length;i++)a(d[i]),"true"===d[i].CaseComplete[0]?r+=1:p+=1;g=100*r/(r+p),e.caseDone=r,e.caseInProgress=p,e.caseRate=g.toFixed(2)}).error(function(e,o,t,n){console.log("http error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkaHR0cCIsIm9yZGVyQnlGaWVsZCIsInJldmVyc2VTb3J0IiwibWFwT3B0aW9ucyIsInpvb20iLCJjZW50ZXIiLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibWFwVHlwZUlkIiwiTWFwVHlwZUlkIiwiVEVSUkFJTiIsIm1hcCIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJtYXJrZXJzIiwiaW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJjcmVhdGVNYXJrZXIiLCJpbmZvIiwibWFya2VyIiwiTWFya2VyIiwicG9zaXRpb24iLCJXZ3M4NFkiLCJXZ3M4NFgiLCJ0aXRsZSIsIlBOYW1lIiwiTmFtZSIsImNvbnRlbnQiLCJDYXNlVGltZSIsIkNhc2VMb2NhdGlvbkRlc2NyaXB0aW9uIiwiQ2FzZURlc2NyaXB0aW9uIiwiQ2FzZUNvbXBsZXRlIiwic2V0SWNvbiIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJzZXRDb250ZW50Iiwib3BlbiIsInB1c2giLCJvcGVuSW5mb1dpbmRvdyIsImUiLCJzZWxlY3RlZE1hcmtlciIsInByZXZlbnREZWZhdWx0IiwidHJpZ2dlciIsImdldCIsInN1Y2Nlc3MiLCJkYXRhIiwic3RhdHVzIiwiaGVhZGVycyIsImNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJkIiwiRGF0YVNldCIsIk5ld0RhdGFTZXQiLCJjYXNlcyIsImNhc2VEb25lIiwiY2FzZUluUHJvZ3Jlc3MiLCJjYXNlUmF0ZSIsImkiLCJsZW5ndGgiLCJ0b0ZpeGVkIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJDQUNBLFdBRUEsR0FBQUEsR0FBQUMsUUFBQUMsT0FBQSxTQUVBRixHQUFBRyxXQUFBLHNCQUFBLFNBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxhQUFBLFdBQ0FGLEVBQUFHLGFBQUEsQ0FFQSxJQUFBQyxJQUNBQyxLQUFBLEdBQ0FDLE9BQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQSxXQUFBLGFBQ0FDLFVBQUFILE9BQUFDLEtBQUFHLFVBQUFDLFFBRUFaLEdBQUFhLElBQUEsR0FBQU4sUUFBQUMsS0FBQU0sSUFBQUMsU0FBQUMsZUFBQSxPQUFBWixHQUVBSixFQUFBaUIsVUFFQSxJQUFBQyxHQUFBLEdBQUFYLFFBQUFDLEtBQUFXLFdBRUFDLEVBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBLEdBQUFmLFFBQUFDLEtBQUFlLFFBQ0FWLElBQUFiLEVBQUFhLElBQ0FXLFNBQUEsR0FBQWpCLFFBQUFDLEtBQUFDLE9BQUFZLEVBQUFJLE9BQUEsR0FBQUosRUFBQUssT0FBQSxJQUNBQyxNQUFBTixFQUFBTyxNQUFBLEdBQUEsTUFBQVAsRUFBQVEsS0FBQSxJQUVBUCxHQUFBUSxRQUFBLHVDQUFBVCxFQUFBVSxTQUFBLEdBQ0EsYUFBQVYsRUFBQVcsd0JBQUEsR0FDQSxhQUFBWCxFQUFBWSxnQkFBQSxHQUNBLFNBRUEsU0FBQVosRUFBQWEsYUFBQSxJQUNBWixFQUFBYSxRQUFBLDBEQUdBNUIsT0FBQUMsS0FBQTRCLE1BQUFDLFlBQUFmLEVBQUEsUUFBQSxXQUNBSixFQUFBb0IsV0FBQSxPQUFBaEIsRUFBQUssTUFBQSxRQUFBTCxFQUFBUSxTQUNBWixFQUFBcUIsS0FBQXZDLEVBQUFhLElBQUFTLEtBR0F0QixFQUFBaUIsUUFBQXVCLEtBQUFsQixHQUtBdEIsR0FBQXlDLGVBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsaUJBQ0FyQyxPQUFBQyxLQUFBNEIsTUFBQVMsUUFBQUYsRUFBQSxVQUdBMUMsRUFBQTZDLElBQUEseUVBQ0FDLFFBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsUUFBQUMsSUFBQSxhQUVBQyxFQUFBTixFQUFBTyxRQUFBLG1CQUFBLEdBQUFDLFdBQUEsR0FBQSxhQUNBeEQsRUFBQXlELE1BQUFILENBRUEsSUFBQUksR0FBQSxFQUFBQyxFQUFBLEVBQUFDLEVBQUEsQ0FDQSxLQUFBQyxFQUFBLEVBQUFBLEVBQUFQLEVBQUFRLE9BQUFELElBQ0F6QyxFQUFBa0MsRUFBQU8sSUFDQSxTQUFBUCxFQUFBTyxHQUFBM0IsYUFBQSxHQUNBd0IsR0FBQSxFQUVBQyxHQUFBLENBR0FDLEdBQUEsSUFBQUYsR0FBQUEsRUFBQUMsR0FFQTNELEVBQUEwRCxTQUFBQSxFQUNBMUQsRUFBQTJELGVBQUFBLEVBQ0EzRCxFQUFBNEQsU0FBQUEsRUFBQUcsUUFBQSxLQUdBQyxNQUFBLFNBQUFoQixFQUFBQyxFQUFBQyxFQUFBQyxHQUVBQyxRQUFBQyxJQUFBIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbihmdW5jdGlvbigpe1xuXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtdKTtcblxuYXBwLmNvbnRyb2xsZXIoJ0dldERpc2FzdGVyU3VtbWFyeScsIFsnJHNjb3BlJywgJyRodHRwJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCkge1xuXG4gICAgJHNjb3BlLm9yZGVyQnlGaWVsZCA9ICdDYXNlVGltZSc7XG4gICAgJHNjb3BlLnJldmVyc2VTb3J0ID0gdHJ1ZTtcblxuICAgIHZhciBtYXBPcHRpb25zID0ge1xuICAgICAgICB6b29tOiAxMyxcbiAgICAgICAgY2VudGVyOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKDI1LjA1MDQ0MTYsIDEyMS41NDE0MTg5KSxcbiAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuVEVSUkFJTlxuICAgIH07XG4gICAgJHNjb3BlLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCBtYXBPcHRpb25zKTtcblxuICAgICRzY29wZS5tYXJrZXJzID0gW107XG5cbiAgICB2YXIgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KCk7XG5cbiAgICB2YXIgY3JlYXRlTWFya2VyID0gZnVuY3Rpb24gKGluZm8pe1xuICAgICAgXG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgIG1hcDogJHNjb3BlLm1hcCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGluZm8uV2dzODRZWzBdLCBpbmZvLldnczg0WFswXSksXG4gICAgICAgICAgICB0aXRsZTogaW5mby5QTmFtZVswXSArICcgLSAnKyBpbmZvLk5hbWVbMF0sXG4gICAgICAgIH0pO1xuICAgICAgICBtYXJrZXIuY29udGVudCA9ICc8ZGl2IGNsYXNzPVwiaW5mb1dpbmRvd0NvbnRlbnRcIj7nmbznlJ/mmYLplpPvvJonICsgaW5mby5DYXNlVGltZVswXSBcbiAgICAgICAgICArICc8L2JyPueBveaDheWcsOm7nu+8micgKyBpbmZvLkNhc2VMb2NhdGlvbkRlc2NyaXB0aW9uWzBdXG4gICAgICAgICAgKyAnPC9icj7ngb3mg4Xmj4/ov7DvvJonICsgaW5mby5DYXNlRGVzY3JpcHRpb25bMF0gXG4gICAgICAgICAgKyAnPC9kaXY+JztcbiAgICAgICAgXG4gICAgICAgIGlmIChpbmZvLkNhc2VDb21wbGV0ZVswXT09PSd0cnVlJykge1xuICAgICAgICAgIG1hcmtlci5zZXRJY29uKCdodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcGZpbGVzL21zL2ljb25zL2dyZWVuLWRvdC5wbmcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGluZm9XaW5kb3cuc2V0Q29udGVudCgnPGgzPicgKyBtYXJrZXIudGl0bGUgKyAnPC9oMz4nICsgbWFya2VyLmNvbnRlbnQgKTtcbiAgICAgICAgICAgIGluZm9XaW5kb3cub3Blbigkc2NvcGUubWFwLCBtYXJrZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICRzY29wZS5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgICAgXG4gICAgfTtcbiAgICBcblxuICAgICRzY29wZS5vcGVuSW5mb1dpbmRvdyA9IGZ1bmN0aW9uKGUsIHNlbGVjdGVkTWFya2VyKXtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBnb29nbGUubWFwcy5ldmVudC50cmlnZ2VyKHNlbGVjdGVkTWFya2VyLCAnY2xpY2snKTtcbiAgICB9O1xuXG4gICAgJGh0dHAuZ2V0KCdodHRwczovL3RjZ2J1c2ZzLmJsb2IuY29yZS53aW5kb3dzLm5ldC9ibG9iZnMvR2V0RGlzYXN0ZXJTdW1tYXJ5Lmpzb24nKVxuICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICBjb25zb2xlLmxvZygnY2FsbCBqc29uJyk7XG5cbiAgICAgIGQgPSBkYXRhLkRhdGFTZXRbJ2RpZmZncjpkaWZmZ3JhbSddWzBdLk5ld0RhdGFTZXRbMF1bJ0NBU0VfU1VNTUFSWSddO1xuICAgICAgJHNjb3BlLmNhc2VzID0gZDsgLy9kYXRhLkRhdGFTZXRbJ2RpZmZncjpkaWZmZ3JhbSddWzBdLk5ld0RhdGFTZXRbMF1bJ0NBU0VfU1VNTUFSWSddO1xuXG4gICAgICB2YXIgY2FzZURvbmUgPSAwLCBjYXNlSW5Qcm9ncmVzcyA9IDAsIGNhc2VSYXRlID0gMC4wMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY3JlYXRlTWFya2VyKGRbaV0pO1xuICAgICAgICBpZiAoZFtpXS5DYXNlQ29tcGxldGVbMF09PT0ndHJ1ZScpIHtcbiAgICAgICAgICAgIGNhc2VEb25lID0gY2FzZURvbmUgKyAxO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBjYXNlSW5Qcm9ncmVzcyA9IGNhc2VJblByb2dyZXNzICsgMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FzZVJhdGUgPSAxMDAgKiBjYXNlRG9uZSAvIChjYXNlRG9uZSArIGNhc2VJblByb2dyZXNzKVxuXG4gICAgICAkc2NvcGUuY2FzZURvbmUgPSBjYXNlRG9uZTtcbiAgICAgICRzY29wZS5jYXNlSW5Qcm9ncmVzcyA9IGNhc2VJblByb2dyZXNzO1xuICAgICAgJHNjb3BlLmNhc2VSYXRlID0gY2FzZVJhdGUudG9GaXhlZCgyKTtcblxuICAgIH0pXG4gICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAvLyBsb2cgZXJyb3JcbiAgICAgIGNvbnNvbGUubG9nKCdodHRwIGVycm9yJyk7XG4gICAgfSk7XG5cblxufV0pO1xuXG59KSgpO1xuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=