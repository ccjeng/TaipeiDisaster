function isEmpty(e){return"undefined"==typeof e||!e||0===e.length}!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,o){e.orderByField="CaseTime",e.reverseSort=!0;var a={zoom:13,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),a),e.markers=[];var t=new google.maps.InfoWindow,n=function(o){var a=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.Wgs84Y[0],o.Wgs84X[0]),title:o.PName[0]+" - "+o.Name[0]});a.content='<div class="infoWindowContent">發生時間：'+(isEmpty(d[i].CaseTime)?"":o.CaseTime[0])+"</br>災情地點："+o.CaseLocationDescription[0]+"</br>災情描述："+o.CaseDescription[0]+"</div>","true"===o.CaseComplete[0]&&a.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(a,"click",function(){t.setContent("<h3>"+a.title+"</h3>"+a.content),t.open(e.map,a)}),e.markers.push(a)};e.openInfoWindow=function(e,o){e.preventDefault(),google.maps.event.trigger(o,"click")},e.total={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"淹積水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},e.doneTotal={"路樹災情":0,"民生、基礎設施災情":0,"建物毀損":0,"廣告招牌災情":0,"淹積水災情":0,"其他災情":0,"環境污染":0,"土石災情":0,"道路、隧道災情":0,"水利設施災情":0,"鐵路、高鐵及捷運災情":0,"車輛及交通事故":0},o.get("./data/GetDisasterSummary.json").success(function(o,a,t,m){console.log("call json"),d=o.DataSet["diffgr:diffgram"][0].NewDataSet[0].CASE_SUMMARY,e.cases=d;var l=0,s=0,r=0;for(i=0;i<d.length;i++)n(d[i]),"true"===d[i].CaseComplete[0]?(l+=1,"路樹災情"===d[i].PName[0]&&(e.doneTotal["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName[0]&&(e.doneTotal["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName[0]&&(e.doneTotal["建物毀損"]+=1),"廣告招牌災情"===d[i].PName[0]&&(e.doneTotal["廣告招牌災情"]+=1),"淹積水災情"===d[i].PName[0]&&(e.doneTotal["淹積水災情"]+=1),"其他災情"===d[i].PName[0]&&(e.doneTotal["其他災情"]+=1),"土石災情"===d[i].PName[0]&&(e.doneTotal["土石災情"]+=1),"道路、隧道災情"===d[i].PName[0]&&(e.doneTotal["道路、隧道災情"]+=1),"水利設施災情"===d[i].PName[0]&&(e.doneTotal["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName[0]&&(e.doneTotal["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName[0]&&(e.doneTotal["車輛及交通事故"]+=1)):s+=1,"路樹災情"===d[i].PName[0]&&(e.total["路樹災情"]+=1),"民生、基礎設施災情"===d[i].PName[0]&&(e.total["民生、基礎設施災情"]+=1),"建物毀損"===d[i].PName[0]&&(e.total["建物毀損"]+=1),"廣告招牌災情"===d[i].PName[0]&&(e.total["廣告招牌災情"]+=1),"淹積水災情"===d[i].PName[0]&&(e.total["淹積水災情"]+=1),"其他災情"===d[i].PName[0]&&(e.total["其他災情"]+=1),"土石災情"===d[i].PName[0]&&(e.total["土石災情"]+=1),"道路、隧道災情"===d[i].PName[0]&&(e.total["道路、隧道災情"]+=1),"水利設施災情"===d[i].PName[0]&&(e.total["水利設施災情"]+=1),"鐵路、高鐵及捷運災情"===d[i].PName[0]&&(e.total["鐵路、高鐵及捷運災情"]+=1),"車輛及交通事故"===d[i].PName[0]&&(e.total["車輛及交通事故"]+=1);r=100*l/(l+s),e.caseDone=l,e.caseInProgress=s,e.caseRate=r.toFixed(2)}).error(function(e,o,a,t){console.log("http error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNFbXB0eSIsInN0ciIsImxlbmd0aCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCJvcmRlckJ5RmllbGQiLCJyZXZlcnNlU29ydCIsIm1hcE9wdGlvbnMiLCJ6b29tIiwiY2VudGVyIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlRFUlJBSU4iLCJtYXAiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibWFya2VycyIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiY3JlYXRlTWFya2VyIiwiaW5mbyIsIm1hcmtlciIsIk1hcmtlciIsInBvc2l0aW9uIiwiV2dzODRZIiwiV2dzODRYIiwidGl0bGUiLCJQTmFtZSIsIk5hbWUiLCJjb250ZW50IiwiZCIsImkiLCJDYXNlVGltZSIsIkNhc2VMb2NhdGlvbkRlc2NyaXB0aW9uIiwiQ2FzZURlc2NyaXB0aW9uIiwiQ2FzZUNvbXBsZXRlIiwic2V0SWNvbiIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJzZXRDb250ZW50Iiwib3BlbiIsInB1c2giLCJvcGVuSW5mb1dpbmRvdyIsImUiLCJzZWxlY3RlZE1hcmtlciIsInByZXZlbnREZWZhdWx0IiwidHJpZ2dlciIsInRvdGFsIiwi6Lev5qi554G95oOFIiwi5rCR55Sf44CB5Z+656SO6Kit5pa954G95oOFIiwi5bu654mp5q+A5pCNIiwi5buj5ZGK5oub54mM54G95oOFIiwi5re556mN5rC054G95oOFIiwi5YW25LuW54G95oOFIiwi55Kw5aKD5rGh5p+TIiwi5Zyf55+z54G95oOFIiwi6YGT6Lev44CB6Zqn6YGT54G95oOFIiwi5rC05Yip6Kit5pa954G95oOFIiwi6ZC16Lev44CB6auY6ZC15Y+K5o236YGL54G95oOFIiwi6LuK6Lyb5Y+K5Lqk6YCa5LqL5pWFIiwiZG9uZVRvdGFsIiwiZ2V0Iiwic3VjY2VzcyIsImRhdGEiLCJzdGF0dXMiLCJoZWFkZXJzIiwiY29uZmlnIiwiY29uc29sZSIsImxvZyIsIkRhdGFTZXQiLCJOZXdEYXRhU2V0IiwiY2FzZXMiLCJjYXNlRG9uZSIsImNhc2VJblByb2dyZXNzIiwiY2FzZVJhdGUiLCJ0b0ZpeGVkIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJBQWdNQSxRQUFBQSxTQUFBQyxHQUNBLE1BQUEsbUJBQUFBLEtBQUFBLEdBQUEsSUFBQUEsRUFBQUMsUUFoTUEsV0FFQSxHQUFBQyxHQUFBQyxRQUFBQyxPQUFBLFNBRUFGLEdBQUFHLFdBQUEsc0JBQUEsU0FBQSxRQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUFFLGFBQUEsV0FDQUYsRUFBQUcsYUFBQSxDQUVBLElBQUFDLElBQ0FDLEtBQUEsR0FDQUMsT0FBQSxHQUFBQyxRQUFBQyxLQUFBQyxPQUFBLFdBQUEsYUFDQUMsVUFBQUgsT0FBQUMsS0FBQUcsVUFBQUMsUUFFQVosR0FBQWEsSUFBQSxHQUFBTixRQUFBQyxLQUFBTSxJQUFBQyxTQUFBQyxlQUFBLE9BQUFaLEdBRUFKLEVBQUFpQixVQUVBLElBQUFDLEdBQUEsR0FBQVgsUUFBQUMsS0FBQVcsV0FFQUMsRUFBQSxTQUFBQyxHQUVBLEdBQUFDLEdBQUEsR0FBQWYsUUFBQUMsS0FBQWUsUUFDQVYsSUFBQWIsRUFBQWEsSUFDQVcsU0FBQSxHQUFBakIsUUFBQUMsS0FBQUMsT0FBQVksRUFBQUksT0FBQSxHQUFBSixFQUFBSyxPQUFBLElBQ0FDLE1BQUFOLEVBQUFPLE1BQUEsR0FBQSxNQUFBUCxFQUFBUSxLQUFBLElBSUFQLEdBQUFRLFFBQUEsd0NBQUFyQyxRQUFBc0MsRUFBQUMsR0FBQUMsVUFBQSxHQUFBWixFQUFBWSxTQUFBLElBQ0EsYUFBQVosRUFBQWEsd0JBQUEsR0FDQSxhQUFBYixFQUFBYyxnQkFBQSxHQUNBLFNBRUEsU0FBQWQsRUFBQWUsYUFBQSxJQUNBZCxFQUFBZSxRQUFBLDBEQUdBOUIsT0FBQUMsS0FBQThCLE1BQUFDLFlBQUFqQixFQUFBLFFBQUEs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QUosTUFBQSxLQUNBNUIsRUFBQWdELE1BQUEsV0FBQSxHQUVBLGVBQUFqQixFQUFBQyxHQUFBSixNQUFBLEtBQ0E1QixFQUFBZ0QsTUFBQSxlQUFBLEdBRUEsWUFBQWpCLEVBQUFDLEdBQUFKLE1BQUEsS0FDQTVCLEVBQUFnRCxNQUFBLFlBQUEsRUFNQTJCLEdBQUEsSUFBQUYsR0FBQUEsRUFBQUMsR0FFQTFFLEVBQUF5RSxTQUFBQSxFQUNBekUsRUFBQTBFLGVBQUFBLEVBQ0ExRSxFQUFBMkUsU0FBQUEsRUFBQUMsUUFBQSxLQUdBQyxNQUFBLFNBQUFiLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFDLFFBQUFDLElBQUEiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCl7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignR2V0RGlzYXN0ZXJTdW1tYXJ5JywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG5cbiAgICAkc2NvcGUub3JkZXJCeUZpZWxkID0gJ0Nhc2VUaW1lJztcbiAgICAkc2NvcGUucmV2ZXJzZVNvcnQgPSB0cnVlO1xuXG4gICAgdmFyIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgIHpvb206IDEzLFxuICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMjUuMDUwNDQxNiwgMTIxLjU0MTQxODkpLFxuICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5URVJSQUlOXG4gICAgfTtcbiAgICAkc2NvcGUubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIG1hcE9wdGlvbnMpO1xuXG4gICAgJHNjb3BlLm1hcmtlcnMgPSBbXTtcblxuICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKTtcblxuICAgIHZhciBjcmVhdGVNYXJrZXIgPSBmdW5jdGlvbiAoaW5mbyl7XG4gICAgICBcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgbWFwOiAkc2NvcGUubWFwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoaW5mby5XZ3M4NFlbMF0sIGluZm8uV2dzODRYWzBdKSxcbiAgICAgICAgICAgIHRpdGxlOiBpbmZvLlBOYW1lWzBdICsgJyAtICcrIGluZm8uTmFtZVswXSxcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBtYXJrZXIuY29udGVudCA9ICc8ZGl2IGNsYXNzPVwiaW5mb1dpbmRvd0NvbnRlbnRcIj7nmbznlJ/mmYLplpPvvJonICsgKGlzRW1wdHkoZFtpXS5DYXNlVGltZSkgPyAnJyA6IGluZm8uQ2FzZVRpbWVbMF0pXG4gICAgICAgICAgKyAnPC9icj7ngb3mg4XlnLDpu57vvJonICsgaW5mby5DYXNlTG9jYXRpb25EZXNjcmlwdGlvblswXVxuICAgICAgICAgICsgJzwvYnI+54G95oOF5o+P6L+w77yaJyArIGluZm8uQ2FzZURlc2NyaXB0aW9uWzBdIFxuICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5mby5DYXNlQ29tcGxldGVbMF09PT0ndHJ1ZScpIHtcbiAgICAgICAgICBtYXJrZXIuc2V0SWNvbignaHR0cDovL21hcHMuZ29vZ2xlLmNvbS9tYXBmaWxlcy9tcy9pY29ucy9ncmVlbi1kb3QucG5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoJzxoMz4nICsgbWFya2VyLnRpdGxlICsgJzwvaDM+JyArIG1hcmtlci5jb250ZW50ICk7XG4gICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4oJHNjb3BlLm1hcCwgbWFya2VyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAkc2NvcGUubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIFxuICAgIH07XG4gICAgXG5cbiAgICAkc2NvcGUub3BlbkluZm9XaW5kb3cgPSBmdW5jdGlvbihlLCBzZWxlY3RlZE1hcmtlcil7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihzZWxlY3RlZE1hcmtlciwgJ2NsaWNrJyk7XG4gICAgfTtcblxuXG4gICAgJHNjb3BlLnRvdGFsID0ge1xuICAgICAgJ+i3r+aoueeBveaDhSc6IDAsXG4gICAgICAn5rCR55Sf44CB5Z+656SO6Kit5pa954G95oOFJzogMCxcbiAgICAgICflu7rnianmr4DmkI0nOiAwLFxuICAgICAgJ+W7o+WRiuaLm+eJjOeBveaDhSc6IDAsXG4gICAgICAn5re556mN5rC054G95oOFJzogMCxcbiAgICAgICflhbbku5bngb3mg4UnOiAwLFxuICAgICAgJ+eSsOWig+axoeafkyc6IDAsXG4gICAgICAn5Zyf55+z54G95oOFJzogMCxcbiAgICAgICfpgZPot6/jgIHpmqfpgZPngb3mg4UnOiAwLFxuICAgICAgJ+awtOWIqeioreaWveeBveaDhSc6IDAsXG4gICAgICAn6ZC16Lev44CB6auY6ZC15Y+K5o236YGL54G95oOFJzogMCxcbiAgICAgICfou4rovJvlj4rkuqTpgJrkuovmlYUnOiAwXG4gICAgfTtcblxuICAgICRzY29wZS5kb25lVG90YWwgPSB7XG4gICAgICAn6Lev5qi554G95oOFJzogMCxcbiAgICAgICfmsJHnlJ/jgIHln7rnpI7oqK3mlr3ngb3mg4UnOiAwLFxuICAgICAgJ+W7uueJqeavgOaQjSc6IDAsXG4gICAgICAn5buj5ZGK5oub54mM54G95oOFJzogMCxcbiAgICAgICfmt7nnqY3msLTngb3mg4UnOiAwLFxuICAgICAgJ+WFtuS7lueBveaDhSc6IDAsXG4gICAgICAn55Kw5aKD5rGh5p+TJzogMCxcbiAgICAgICflnJ/nn7Pngb3mg4UnOiAwLFxuICAgICAgJ+mBk+i3r+OAgemap+mBk+eBveaDhSc6IDAsXG4gICAgICAn5rC05Yip6Kit5pa954G95oOFJzogMCxcbiAgICAgICfpkLXot6/jgIHpq5jpkLXlj4rmjbfpgYvngb3mg4UnOiAwLFxuICAgICAgJ+i7iui8m+WPiuS6pOmAmuS6i+aVhSc6IDBcbiAgICB9O1xuXG4gICAgLy8kaHR0cC5nZXQoJ2h0dHBzOi8vdGNnYnVzZnMuYmxvYi5jb3JlLndpbmRvd3MubmV0L2Jsb2Jmcy9HZXREaXNhc3RlclN1bW1hcnkuanNvbicpXG4gICAgJGh0dHAuZ2V0KCcuL2RhdGEvR2V0RGlzYXN0ZXJTdW1tYXJ5Lmpzb24nKVxuICAgIFxuICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICBjb25zb2xlLmxvZygnY2FsbCBqc29uJyk7XG5cbiAgICAgIGQgPSBkYXRhLkRhdGFTZXRbJ2RpZmZncjpkaWZmZ3JhbSddWzBdLk5ld0RhdGFTZXRbMF1bJ0NBU0VfU1VNTUFSWSddO1xuICAgICAgJHNjb3BlLmNhc2VzID0gZDsgLy9kYXRhLkRhdGFTZXRbJ2RpZmZncjpkaWZmZ3JhbSddWzBdLk5ld0RhdGFTZXRbMF1bJ0NBU0VfU1VNTUFSWSddO1xuXG4gICAgICB2YXIgY2FzZURvbmUgPSAwLCBjYXNlSW5Qcm9ncmVzcyA9IDAsIGNhc2VSYXRlID0gMC4wMDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBkLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgY3JlYXRlTWFya2VyKGRbaV0pO1xuICAgICAgICBpZiAoZFtpXS5DYXNlQ29tcGxldGVbMF09PT0ndHJ1ZScpIHtcbiAgICAgICAgICAgIGNhc2VEb25lID0gY2FzZURvbmUgKyAxO1xuXG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfot6/mqLnngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+i3r+aoueeBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfmsJHnlJ/jgIHln7rnpI7oqK3mlr3ngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+awkeeUn+OAgeWfuuekjuioreaWveeBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSflu7rnianmr4DmkI0nKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+W7uueJqeavgOaQjSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSflu6PlkYrmi5vniYzngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+W7o+WRiuaLm+eJjOeBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfmt7nnqY3msLTngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+a3ueepjeawtOeBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSflhbbku5bngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+WFtuS7lueBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSflnJ/nn7Pngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+Wcn+efs+eBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfpgZPot6/jgIHpmqfpgZPngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+mBk+i3r+OAgemap+mBk+eBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfmsLTliKnoqK3mlr3ngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+awtOWIqeioreaWveeBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfpkLXot6/jgIHpq5jpkLXlj4rmjbfpgYvngb3mg4UnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+mQtei3r+OAgemrmOmQteWPiuaNt+mBi+eBveaDhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfou4rovJvlj4rkuqTpgJrkuovmlYUnKSB7XG4gICAgICAgICAgICAgICRzY29wZS5kb25lVG90YWxbJ+i7iui8m+WPiuS6pOmAmuS6i+aVhSddICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGNhc2VJblByb2dyZXNzID0gY2FzZUluUHJvZ3Jlc3MgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRbaV0uUE5hbWVbMF09PT0n6Lev5qi554G95oOFJykge1xuICAgICAgICAgICRzY29wZS50b3RhbFsn6Lev5qi554G95oOFJ10gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfmsJHnlJ/jgIHln7rnpI7oqK3mlr3ngb3mg4UnKSB7XG4gICAgICAgICAgJHNjb3BlLnRvdGFsWyfmsJHnlJ/jgIHln7rnpI7oqK3mlr3ngb3mg4UnXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkW2ldLlBOYW1lWzBdPT09J+W7uueJqeavgOaQjScpIHtcbiAgICAgICAgICAkc2NvcGUudG90YWxbJ+W7uueJqeavgOaQjSddICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRbaV0uUE5hbWVbMF09PT0n5buj5ZGK5oub54mM54G95oOFJykge1xuICAgICAgICAgICRzY29wZS50b3RhbFsn5buj5ZGK5oub54mM54G95oOFJ10gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfmt7nnqY3msLTngb3mg4UnKSB7XG4gICAgICAgICAgJHNjb3BlLnRvdGFsWyfmt7nnqY3msLTngb3mg4UnXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkW2ldLlBOYW1lWzBdPT09J+WFtuS7lueBveaDhScpIHtcbiAgICAgICAgICAkc2NvcGUudG90YWxbJ+WFtuS7lueBveaDhSddICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRbaV0uUE5hbWVbMF09PT0n5Zyf55+z54G95oOFJykge1xuICAgICAgICAgICRzY29wZS50b3RhbFsn5Zyf55+z54G95oOFJ10gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfpgZPot6/jgIHpmqfpgZPngb3mg4UnKSB7XG4gICAgICAgICAgJHNjb3BlLnRvdGFsWyfpgZPot6/jgIHpmqfpgZPngb3mg4UnXSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkW2ldLlBOYW1lWzBdPT09J+awtOWIqeioreaWveeBveaDhScpIHtcbiAgICAgICAgICAkc2NvcGUudG90YWxbJ+awtOWIqeioreaWveeBveaDhSddICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRbaV0uUE5hbWVbMF09PT0n6ZC16Lev44CB6auY6ZC15Y+K5o236YGL54G95oOFJykge1xuICAgICAgICAgICRzY29wZS50b3RhbFsn6ZC16Lev44CB6auY6ZC15Y+K5o236YGL54G95oOFJ10gKz0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZFtpXS5QTmFtZVswXT09PSfou4rovJvlj4rkuqTpgJrkuovmlYUnKSB7XG4gICAgICAgICAgJHNjb3BlLnRvdGFsWyfou4rovJvlj4rkuqTpgJrkuovmlYUnXSArPSAxO1xuICAgICAgICB9XG5cblxuICAgICAgfVxuXG4gICAgICBjYXNlUmF0ZSA9IDEwMCAqIGNhc2VEb25lIC8gKGNhc2VEb25lICsgY2FzZUluUHJvZ3Jlc3MpXG5cbiAgICAgICRzY29wZS5jYXNlRG9uZSA9IGNhc2VEb25lO1xuICAgICAgJHNjb3BlLmNhc2VJblByb2dyZXNzID0gY2FzZUluUHJvZ3Jlc3M7XG4gICAgICAkc2NvcGUuY2FzZVJhdGUgPSBjYXNlUmF0ZS50b0ZpeGVkKDIpO1xuXG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgIC8vIGxvZyBlcnJvclxuICAgICAgY29uc29sZS5sb2coJ2h0dHAgZXJyb3InKTtcbiAgICB9KTtcblxuXG59XSk7XG5cbn0pKCk7XG5cblxuZnVuY3Rpb24gaXNFbXB0eShzdHIpIHtcbiAgICByZXR1cm4gKCh0eXBlb2Ygc3RyID09ICd1bmRlZmluZWQnKXx8ICFzdHIgfHwgMCA9PT0gc3RyLmxlbmd0aCk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=