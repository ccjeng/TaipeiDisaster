function isEmpty(e){return"undefined"==typeof e||!e||0===e.length}!function(){var e=angular.module("app",[]);e.controller("GetDisasterSummary",["$scope","$http",function(e,o){e.orderByField="CaseTime",e.reverseSort=!0;var t={zoom:13,center:new google.maps.LatLng(25.0504416,121.5414189),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];var n=new google.maps.InfoWindow,a=function(o){var t=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.Wgs84Y[0],o.Wgs84X[0]),title:o.PName[0]+" - "+o.Name[0]});t.content='<div class="infoWindowContent">發生時間：'+(isEmpty(d[i].CaseTime)?"":o.CaseTime[0])+"</br>災情地點："+o.CaseLocationDescription[0]+"</br>災情描述："+o.CaseDescription[0]+"</div>","true"===o.CaseComplete[0]&&t.setIcon("http://maps.google.com/mapfiles/ms/icons/green-dot.png"),google.maps.event.addListener(t,"click",function(){n.setContent("<h3>"+t.title+"</h3>"+t.content),n.open(e.map,t)}),e.markers.push(t)};e.openInfoWindow=function(e,o){e.preventDefault(),google.maps.event.trigger(o,"click")},o.get("./data/GetDisasterSummary.json").success(function(o,t,n,s){console.log("call json"),d=o.DataSet["diffgr:diffgram"][0].NewDataSet[0].CASE_SUMMARY,e.cases=d;var r=0,p=0,m=0;for(i=0;i<d.length;i++)a(d[i]),"true"===d[i].CaseComplete[0]?r+=1:p+=1;m=100*r/(r+p),e.caseDone=r,e.caseInProgress=p,e.caseRate=m.toFixed(2)}).error(function(e,o,t,n){console.log("http error")})}])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaXNFbXB0eSIsInN0ciIsImxlbmd0aCIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJGh0dHAiLCJvcmRlckJ5RmllbGQiLCJyZXZlcnNlU29ydCIsIm1hcE9wdGlvbnMiLCJ6b29tIiwiY2VudGVyIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlRFUlJBSU4iLCJtYXAiLCJNYXAiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwibWFya2VycyIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiY3JlYXRlTWFya2VyIiwiaW5mbyIsIm1hcmtlciIsIk1hcmtlciIsInBvc2l0aW9uIiwiV2dzODRZIiwiV2dzODRYIiwidGl0bGUiLCJQTmFtZSIsIk5hbWUiLCJjb250ZW50IiwiZCIsImkiLCJDYXNlVGltZSIsIkNhc2VMb2NhdGlvbkRlc2NyaXB0aW9uIiwiQ2FzZURlc2NyaXB0aW9uIiwiQ2FzZUNvbXBsZXRlIiwic2V0SWNvbiIsImV2ZW50IiwiYWRkTGlzdGVuZXIiLCJzZXRDb250ZW50Iiwib3BlbiIsInB1c2giLCJvcGVuSW5mb1dpbmRvdyIsImUiLCJzZWxlY3RlZE1hcmtlciIsInByZXZlbnREZWZhdWx0IiwidHJpZ2dlciIsImdldCIsInN1Y2Nlc3MiLCJkYXRhIiwic3RhdHVzIiwiaGVhZGVycyIsImNvbmZpZyIsImNvbnNvbGUiLCJsb2ciLCJEYXRhU2V0IiwiTmV3RGF0YVNldCIsImNhc2VzIiwiY2FzZURvbmUiLCJjYXNlSW5Qcm9ncmVzcyIsImNhc2VSYXRlIiwidG9GaXhlZCIsImVycm9yIl0sIm1hcHBpbmdzIjoiQUE0RkEsUUFBQUEsU0FBQUMsR0FDQSxNQUFBLG1CQUFBQSxLQUFBQSxHQUFBLElBQUFBLEVBQUFDLFFBNUZBLFdBRUEsR0FBQUMsR0FBQUMsUUFBQUMsT0FBQSxTQUVBRixHQUFBRyxXQUFBLHNCQUFBLFNBQUEsUUFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxhQUFBLFdBQ0FGLEVBQUFHLGFBQUEsQ0FFQSxJQUFBQyxJQUNBQyxLQUFBLEdBQ0FDLE9BQUEsR0FBQUMsUUFBQUMsS0FBQUMsT0FBQSxXQUFBLGFBQ0FDLFVBQUFILE9BQUFDLEtBQUFHLFVBQUFDLFFBRUFaLEdBQUFhLElBQUEsR0FBQU4sUUFBQUMsS0FBQU0sSUFBQUMsU0FBQUMsZUFBQSxPQUFBWixHQUVBSixFQUFBaUIsVUFFQSxJQUFBQyxHQUFBLEdBQUFYLFFBQUFDLEtBQUFXLFdBRUFDLEVBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBLEdBQUFmLFFBQUFDLEtBQUFlLFFBQ0FWLElBQUFiLEVBQUFhLElBQ0FXLFNBQUEsR0FBQWpCLFFBQUFDLEtBQUFDLE9BQUFZLEVBQUFJLE9BQUEsR0FBQUosRUFBQUssT0FBQSxJQUNBQyxNQUFBTixFQUFBTyxNQUFBLEdBQUEsTUFBQVAsRUFBQVEsS0FBQSxJQUlBUCxHQUFBUSxRQUFBLHdDQUFBckMsUUFBQXNDLEVBQUFDLEdBQUFDLFVBQUEsR0FBQVosRUFBQVksU0FBQSxJQUNBLGFBQUFaLEVBQUFhLHdCQUFBLEdBQ0EsYUFBQWIsRUFBQWMsZ0JBQUEsR0FDQSxTQUVBLFNBQUFkLEVBQUFlLGFBQUEsSUFDQWQsRUFBQWUsUUFBQSwwREFHQTlCLE9BQUFDLEtBQUE4QixNQUFBQyxZQUFBakIsRUFBQSxRQUFBLFdBQ0FKLEVBQUFzQixXQUFBLE9BQUFsQixFQUFBSyxNQUFBLFFBQUFMLEVBQUFRLFNBQ0FaLEVBQUF1QixLQUFBekMsRUFBQWEsSUFBQVMsS0FHQXRCLEVBQUFpQixRQUFBeUIsS0FBQXBCLEdBS0F0QixHQUFBMkMsZUFBQSxTQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxpQkFDQXZDLE9BQUFDLEtBQUE4QixNQUFBUyxRQUFBRixFQUFBLFVBSUE1QyxFQUFBK0MsSUFBQSxrQ0FFQUMsUUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxRQUFBQyxJQUFBLGFBRUF4QixFQUFBbUIsRUFBQU0sUUFBQSxtQkFBQSxHQUFBQyxXQUFBLEdBQUEsYUFDQXpELEVBQUEwRCxNQUFBM0IsQ0FFQSxJQUFBNEIsR0FBQSxFQUFBQyxFQUFBLEVBQUFDLEVBQUEsQ0FDQSxLQUFBN0IsRUFBQSxFQUFBQSxFQUFBRCxFQUFBcEMsT0FBQXFDLElBQ0FaLEVBQUFXLEVBQUFDLElBQ0EsU0FBQUQsRUFBQUMsR0FBQUksYUFBQSxHQUNBdUIsR0FBQSxFQUVBQyxHQUFBLENBS0FDLEdBQUEsSUFBQUYsR0FBQUEsRUFBQUMsR0FFQTVELEVBQUEyRCxTQUFBQSxFQUNBM0QsRUFBQTRELGVBQUFBLEVBQ0E1RCxFQUFBNkQsU0FBQUEsRUFBQUMsUUFBQSxLQUdBQyxNQUFBLFNBQUFiLEVBQUFDLEVBQUFDLEVBQUFDLEdBRUFDLFFBQUFDLElBQUEiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuKGZ1bmN0aW9uKCl7XG5cbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW10pO1xuXG5hcHAuY29udHJvbGxlcignR2V0RGlzYXN0ZXJTdW1tYXJ5JywgWyckc2NvcGUnLCAnJGh0dHAnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwKSB7XG5cbiAgICAkc2NvcGUub3JkZXJCeUZpZWxkID0gJ0Nhc2VUaW1lJztcbiAgICAkc2NvcGUucmV2ZXJzZVNvcnQgPSB0cnVlO1xuXG4gICAgdmFyIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgIHpvb206IDEzLFxuICAgICAgICBjZW50ZXI6IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoMjUuMDUwNDQxNiwgMTIxLjU0MTQxODkpLFxuICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5URVJSQUlOXG4gICAgfTtcbiAgICAkc2NvcGUubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIG1hcE9wdGlvbnMpO1xuXG4gICAgJHNjb3BlLm1hcmtlcnMgPSBbXTtcblxuICAgIHZhciBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coKTtcblxuICAgIHZhciBjcmVhdGVNYXJrZXIgPSBmdW5jdGlvbiAoaW5mbyl7XG4gICAgICBcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgbWFwOiAkc2NvcGUubWFwLFxuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoaW5mby5XZ3M4NFlbMF0sIGluZm8uV2dzODRYWzBdKSxcbiAgICAgICAgICAgIHRpdGxlOiBpbmZvLlBOYW1lWzBdICsgJyAtICcrIGluZm8uTmFtZVswXSxcbiAgICAgICAgfSk7XG5cblxuICAgICAgICBtYXJrZXIuY29udGVudCA9ICc8ZGl2IGNsYXNzPVwiaW5mb1dpbmRvd0NvbnRlbnRcIj7nmbznlJ/mmYLplpPvvJonICsgKGlzRW1wdHkoZFtpXS5DYXNlVGltZSkgPyAnJyA6IGluZm8uQ2FzZVRpbWVbMF0pXG4gICAgICAgICAgKyAnPC9icj7ngb3mg4XlnLDpu57vvJonICsgaW5mby5DYXNlTG9jYXRpb25EZXNjcmlwdGlvblswXVxuICAgICAgICAgICsgJzwvYnI+54G95oOF5o+P6L+w77yaJyArIGluZm8uQ2FzZURlc2NyaXB0aW9uWzBdIFxuICAgICAgICAgICsgJzwvZGl2Pic7XG4gICAgICAgIFxuICAgICAgICBpZiAoaW5mby5DYXNlQ29tcGxldGVbMF09PT0ndHJ1ZScpIHtcbiAgICAgICAgICBtYXJrZXIuc2V0SWNvbignaHR0cDovL21hcHMuZ29vZ2xlLmNvbS9tYXBmaWxlcy9tcy9pY29ucy9ncmVlbi1kb3QucG5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoJzxoMz4nICsgbWFya2VyLnRpdGxlICsgJzwvaDM+JyArIG1hcmtlci5jb250ZW50ICk7XG4gICAgICAgICAgICBpbmZvV2luZG93Lm9wZW4oJHNjb3BlLm1hcCwgbWFya2VyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAkc2NvcGUubWFya2Vycy5wdXNoKG1hcmtlcik7XG4gICAgICAgIFxuICAgIH07XG4gICAgXG5cbiAgICAkc2NvcGUub3BlbkluZm9XaW5kb3cgPSBmdW5jdGlvbihlLCBzZWxlY3RlZE1hcmtlcil7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQudHJpZ2dlcihzZWxlY3RlZE1hcmtlciwgJ2NsaWNrJyk7XG4gICAgfTtcblxuICAgIC8vJGh0dHAuZ2V0KCdodHRwczovL3RjZ2J1c2ZzLmJsb2IuY29yZS53aW5kb3dzLm5ldC9ibG9iZnMvR2V0RGlzYXN0ZXJTdW1tYXJ5Lmpzb24nKVxuICAgICRodHRwLmdldCgnLi9kYXRhL0dldERpc2FzdGVyU3VtbWFyeS5qc29uJylcbiAgICBcbiAgICAuc3VjY2VzcyhmdW5jdGlvbihkYXRhLCBzdGF0dXMsIGhlYWRlcnMsIGNvbmZpZykge1xuICAgICAgY29uc29sZS5sb2coJ2NhbGwganNvbicpO1xuXG4gICAgICBkID0gZGF0YS5EYXRhU2V0WydkaWZmZ3I6ZGlmZmdyYW0nXVswXS5OZXdEYXRhU2V0WzBdWydDQVNFX1NVTU1BUlknXTtcbiAgICAgICRzY29wZS5jYXNlcyA9IGQ7IC8vZGF0YS5EYXRhU2V0WydkaWZmZ3I6ZGlmZmdyYW0nXVswXS5OZXdEYXRhU2V0WzBdWydDQVNFX1NVTU1BUlknXTtcblxuICAgICAgdmFyIGNhc2VEb25lID0gMCwgY2FzZUluUHJvZ3Jlc3MgPSAwLCBjYXNlUmF0ZSA9IDAuMDA7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgZC5sZW5ndGg7IGkrKyl7XG4gICAgICAgIGNyZWF0ZU1hcmtlcihkW2ldKTtcbiAgICAgICAgaWYgKGRbaV0uQ2FzZUNvbXBsZXRlWzBdPT09J3RydWUnKSB7XG4gICAgICAgICAgICBjYXNlRG9uZSA9IGNhc2VEb25lICsgMTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgY2FzZUluUHJvZ3Jlc3MgPSBjYXNlSW5Qcm9ncmVzcyArIDE7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBjYXNlUmF0ZSA9IDEwMCAqIGNhc2VEb25lIC8gKGNhc2VEb25lICsgY2FzZUluUHJvZ3Jlc3MpXG5cbiAgICAgICRzY29wZS5jYXNlRG9uZSA9IGNhc2VEb25lO1xuICAgICAgJHNjb3BlLmNhc2VJblByb2dyZXNzID0gY2FzZUluUHJvZ3Jlc3M7XG4gICAgICAkc2NvcGUuY2FzZVJhdGUgPSBjYXNlUmF0ZS50b0ZpeGVkKDIpO1xuXG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgIC8vIGxvZyBlcnJvclxuICAgICAgY29uc29sZS5sb2coJ2h0dHAgZXJyb3InKTtcbiAgICB9KTtcblxuXG59XSk7XG5cbn0pKCk7XG5cblxuZnVuY3Rpb24gaXNFbXB0eShzdHIpIHtcbiAgICByZXR1cm4gKCh0eXBlb2Ygc3RyID09ICd1bmRlZmluZWQnKXx8ICFzdHIgfHwgMCA9PT0gc3RyLmxlbmd0aCk7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=